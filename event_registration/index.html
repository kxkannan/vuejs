<!DOCTYPE html>

<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

  <div id="root">
    <checkin-status></checkin-status>

    <filter-registrees></filter-registrees>

    <registrees v-on:check-in="checkIn" :people="registrees"></registrees>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>


  <script src="../event_registration/registrees.js"></script>
  <script src="../event_registration/filterRegistrees.js"></script>
  <script src="../event_registration/checkinStatus.js"></script>

  <link rel="stylesheet" type="text/css" href="styles.css">

  <script>

   var app = new Vue({
     el: '#root',

     data: {

           registrees: [
             { id: 1, firstName: 'John', lastName: 'Doe', email: 'john@doe.com', phone: '303-555-1212',   shirtSize: 'XL',  registered: false },
             { id: 2, firstName: 'Susan', lastName: 'Doe', email: 'susan@doe.com', phone: '303-555-1212', shirtSize: 'M',   registered: false },
             { id: 3, firstName: 'Jack', lastName: 'Doe', email: 'jack81@doe.com', phone: '303-555-1212', shirtSize: 'S',   registered: true },
             { id: 4, firstName: 'Edwin', lastName: 'Doe', email: 'ed2@doe.com', phone: '303-555-1212',   shirtSize: 'S',   registered: false },
           ]

     },

     methods: {
       checkIn(registreeId) {


         let updatedRegistrees = this.registrees.map( registree => {
           if (registree.id == registreeId){
             registree.registered = true
           }
           return registree;

         });
         this.registrees = updatedRegistrees;
         console.log(" after checkin data.registrees: " + JSON.stringify(this.$data.registrees))
       }
     },

     computed: {

       tree() {
         return this.registrees;
       }

     }

   })

  </script>


</body>

</html>
